(window.webpackJsonp=window.webpackJsonp||[]).push([[60],{642:function(t,o,e){},742:function(t,o,e){"use strict";e(642)},804:function(t,o,e){"use strict";e.r(o);var n,r=e(54),l=e(7),c=e(5),C=(e(412),e(41),e(244)),d=e.n(C),m=(e(421),e(422)),f=e.n(m),h=(e(423),e(424)),v=e.n(h),w=(e(740),e(741)),k=e.n(w),E=(e(42),e(9),e(15),e(61),e(62),e(431)),L=e.n(E),y={layout:"EditRutasDashboardLayout",components:(n={},Object(c.a)(n,k.a.name,k.a),Object(c.a)(n,v.a.name,v.a),Object(c.a)(n,f.a.name,f.a),Object(c.a)(n,d.a.name,d.a),n),data:function(){return{token:this.$cookies.get("token"),mListRutasEditControles:[],oCenter:{lat:-1.249546,lng:-78.585376},oZoom:7,isVisibleControlesEdit:!1}},methods:{showControlesDrawer:function(){this.isVisibleControlesEdit=!this.isVisibleControlesEdit},showNotification:function(t,o,e){this.$notify({message:t,timeout:2e3,icon:e,type:o})},initControles:function(){var t=this;return Object(l.a)(regeneratorRuntime.mark((function o(){var e,n;return regeneratorRuntime.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return o.prev=0,o.next=3,t.$axios.post("http://localhost:3001/AllControles",{token:t.token});case 3:200==(e=o.sent).data.status_code&&((n=t.mListRutasEditControles).push.apply(n,Object(r.a)(e.data.data)),t.oCenter={lat:parseFloat(t.mListRutasEditControles[0].Lati1Ctrl),lng:parseFloat(t.mListRutasEditControles[0].Long1Ctrl)},t.oZoom=16),console.log(t.mListRutasEditControles),o.next=11;break;case 8:o.prev=8,o.t0=o.catch(0),console.log(o.t0);case 11:case"end":return o.stop()}}),o,null,[[0,8]])})))()},centrarControlEdit:function(t){this.oCenter={lat:parseFloat(t.Lati1Ctrl),lng:parseFloat(t.Long1Ctrl)},this.oZoom=19},desactivarControl:function(t){var o=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://localhost:3001/DeleteControl",console.log(n),e.prev=2,e.next=5,o.$axios.delete(n,{data:{token:o.token,control:t.CodiCtrl}});case 5:if(200==(r=e.sent).data.status_code)for(o.showNotification(r.data.msm,"danger","ni ni-check-bold"),i=0;i<o.mListRutasEditControles.length;i++)o.mListRutasEditControles[i].CodiCtrl==t.CodiCtrl&&(o.mListRutasEditControles[i].EstaCtrl=0);else o.showNotification(r.data.msm,"danger","ni ni-fat-remove");e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o.showNotification(e.t0.toString(),"danger","ni ni-fat-remove");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},activarControl:function(t){var o=this;return Object(l.a)(regeneratorRuntime.mark((function e(){var n,r,i;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="http://localhost:3001/ActiveControl",console.log(n),e.prev=2,e.next=5,o.$axios.put(n,{token:o.token,control:t.CodiCtrl});case 5:if(200==(r=e.sent).data.status_code)for(o.showNotification(r.data.msm,"success","ni ni-check-bold"),i=0;i<o.mListRutasEditControles.length;i++)o.mListRutasEditControles[i].CodiCtrl==t.CodiCtrl&&(o.mListRutasEditControles[i].EstaCtrl=1);else o.showNotification(r.data.msm,"error","ni ni-fat-remove");e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),o.showNotification(e.t0.toString(),"error","ni ni-fat-remove");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})))()},deleteControlEdit:function(t){var o=this;this.oCenter={lat:parseFloat(t.Lati1Ctrl),lng:parseFloat(t.Long1Ctrl)},this.oZoom=18,L.a.fire({title:"Desactivar Control",text:t.DescCtrl,icon:"question",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Cancelar",confirmButtonText:"Si, desactivar."}).then((function(e){e.isConfirmed&&o.desactivarControl(t)}))}},mounted:function(){this.initControles()}},_=(e(742),e(3)),component=Object(_.a)(y,(function(){var t=this,o=t.$createElement,e=t._self._c||o;return e("div",{attrs:{id:"rezizeArea"}},[e("GmapMap",{staticClass:"mapa",attrs:{center:t.oCenter,zoom:t.oZoom,"map-type-id":"roadmap",options:{zoomControl:!1,scaleControl:!1,mapTypeControl:!1,streetViewControl:!1,rotateControl:!1,fullscreenControl:!1,disableDefaultUi:!1}}},[t._l(t.mListRutasEditControles,(function(t){return e("GmapPolygon",{key:t.CodiCtrl,attrs:{editable:t.editable,options:{strokeColor:1==t.EstaCtrl?"#172b4d":"#F71313",fillColor:1==t.EstaCtrl?"#172b4d":"#F7131380",strokeOpacity:1,strokeWeight:2},strokeOpacity:.5,strokeWeight:1,paths:t.calculator.coordinates}})})),t._v(" "),t._l(t.mListRutasEditControles,(function(t){return e("GmapPolyline",{key:"PL"+t.CodiCtrl,attrs:{path:[{lat:parseFloat(t.Lati1Ctrl),lng:parseFloat(t.Long1Ctrl)},{lat:parseFloat(t.Lati2Ctrl),lng:parseFloat(t.Long2Ctrl)}],options:{geodesic:!0,strokeColor:1==t.EstaCtrl?"#172b4d":"#FF0000",fillColor:1==t.EstaCtrl?"#172b4d":"#FF0000",strokeOpacity:1,strokeWeight:2}}})})),t._v(" "),t._l(t.mListRutasEditControles,(function(t,o){return e("GmapMarker",{key:t.DescCtrl+o,attrs:{position:{lat:parseFloat(t.Lati1Ctrl),lng:parseFloat(t.Long1Ctrl)},optimized:!0,icon:"static/img/control/control.png",options:{label:{text:t.DescCtrl,color:1==t.EstaCtrl?"#172b4d":"#F71313",className:"paddingLabelControl"}}}})}))],2),t._v(" "),e("el-drawer",{attrs:{title:"Controles",visible:t.isVisibleControlesEdit,direction:"rtl"},on:{"update:visible":function(o){t.isVisibleControlesEdit=o}}},[e("div",{staticClass:"containerDrawer"},[e("base-button",{attrs:{block:"",type:"primary"}},[t._v("Crear nuevo control")]),e("br"),t._v(" "),e("el-table",{staticStyle:{width:"100%"},attrs:{data:t.mListRutasEditControles}},[e("el-table-column",{attrs:{prop:"DescCtrl",label:"Nombre",width:"235"}}),t._v(" "),e("el-table-column",{attrs:{label:"Actions"},scopedSlots:t._u([{key:"default",fn:function(o){return[1==o.row.EstaCtrl?e("base-button",{staticClass:"btnActionsDrawerControl",attrs:{icon:"",size:"sm",type:"default"},on:{click:function(e){return t.centrarControlEdit(o.row)}}},[e("span",{staticClass:"btn-inner--icon"},[e("i",{staticClass:"ni ni-ruler-pencil"})])]):t._e(),t._v(" "),0==o.row.EstaCtrl?e("base-button",{staticClass:"btnActionsDrawerControl",attrs:{icon:"",size:"sm",type:"success"},on:{click:function(e){return t.activarControl(o.row)}}},[e("span",{staticClass:"btn-inner--icon"},[e("i",{staticClass:"ni ni-check-bold"})])]):t._e(),t._v(" "),e("base-button",{staticClass:"btnActionsDrawerControl",attrs:{icon:"",size:"sm",type:"primary"},on:{click:function(e){return t.centrarControlEdit(o.row)}}},[e("span",{staticClass:"btn-inner--icon"},[e("i",{staticClass:"ni ni-world"})])]),t._v(" "),0!=o.row.EstaCtrl?e("base-button",{staticClass:"btnActionsDrawerControl",attrs:{icon:"",size:"sm",type:"danger"},on:{click:function(e){return t.deleteControlEdit(o.row)}}},[e("span",{staticClass:"btn-inner--icon"},[e("i",{staticClass:"ni ni-scissors"})])]):t._e()]}}])})],1)],1)]),t._v(" "),e("div",{staticClass:"topButtonControl"},[e("base-button",{attrs:{icon:"",type:"default"},on:{click:function(o){return t.showControlesDrawer()}}},[e("span",{staticClass:"btn-inner--icon"},[e("i",{staticClass:"ni ni-ungroup"})]),t._v(" "),e("span",{staticClass:"btn-inner--text"},[t._v("CONTROLES")])])],1)],1)}),[],!1,null,null,null);o.default=component.exports}}]);