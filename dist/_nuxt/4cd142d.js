(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{647:function(e,t,r){},749:function(e,t,r){"use strict";r(647)},809:function(e,t,r){"use strict";r.r(t);var n=r(7),o=(r(42),r(9),r(15),r(61),r(62),r(96)),c=r.n(o),l=r(431),m=r.n(l),d={layout:"AuthLayout",asyncData:function(e){return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o,l,m,d;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.params,n=r.empresa,o=null,l="",m=null,t.prev=5,t.next=8,c.a.post("http://localhost:3001/"+n+"/infoEmpresa");case 8:d=t.sent,console.log(d.data.data),m=d.data.data.web.produccion,o=d.data.data.name,l=d.data.data.logo,t.next=19;break;case 15:t.prev=15,t.t0=t.catch(5),console.log(t.t0),o=t.t0.toString();case 19:return t.abrupt("return",{empresa:n,empresa_name:o,logo_empresa:l,oPermisosWebProduccionJSON:m});case 20:case"end":return t.stop()}}),t,null,[[5,15]])})))()},head:function(){return{title:this.empresa+" | Smart7Bus.com"}},data:function(){return{user:"",pass:"",app:this,oPermisosWebProduccionJSON:null,sub_empresa_texto:this.empresa_name,context:this,model:{email:"",password:"",rememberMe:!1}}},methods:{OnLogin:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,n,o;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(""==e.model.email||""==e.model.password){t.next=15;break}return r="http://localhost:3001/"+e.empresa+"/loginEmpresa",t.prev=2,t.next=5,c.a.post(r,{user:e.model.email,password:e.model.password});case 5:n=t.sent,"S/N"!=(o=n.data).token&&"S/N"!=o.names?m.a.fire({title:"Gestión Inteligente de Transporte Urbano",text:"Bienvenido "+o.names,icon:"success",allowOutsideClick:!1,confirmButtonText:"Aceptar"}).then((function(t){t.isConfirmed&&(e.$cookies.set("empresa",e.empresa),e.$cookies.set("nameEmpresa",e.sub_empresa_texto),e.$cookies.set("token",o.token),e.$cookies.set("permisos",o.permisos),e.$cookies.set("namesUsuario",o.names),e.$cookies.set("logo",e.logo_empresa),e.$cookies.set("WebProduccion",e.oPermisosWebProduccionJSON),e.$router.push("/monitoreo"))})):m.a.fire({title:"Gestión Inteligente de Transporte Urbano",text:"Credenciales no válidas",icon:"error",confirmButtonText:"Aceptar"}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:t.next=16;break;case 15:alert("DATOS VACIOS");case 16:case"end":return t.stop()}}),t,null,[[2,10]])})))()},ReadInfoNameCompany:function(){var e=this;return Object(n.a)(regeneratorRuntime.mark((function t(){var r,i;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,c.a.post("http://localhost:3001"+e.empresa_container+"/info");case 2:for(r=t.sent,console.log(r),i=0;i<r.data.data.length;i++)e.empresas.push(r.data.data[i]);case 5:case"end":return t.stop()}}),t)})))()}},mounted:function(){"Sin Empresa"!=this.sub_empresa_texto&&(this.sub_empresa_texto=this.empresa_name)}},v=(r(749),r(3)),component=Object(v.a)(d,(function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"header bg-gradient-success py-7 py-lg-8 pt-lg-9"},[e._m(0),e._v(" "),r("div",{staticClass:"separator separator-bottom separator-skew zindex-100"},[r("svg",{attrs:{x:"0",y:"0",viewBox:"0 0 2560 100",preserveAspectRatio:"none",version:"1.1",xmlns:"http://www.w3.org/2000/svg"}},[r("polygon",{staticClass:"fill-default",attrs:{points:"2560 0 2560 100 0 100"}})])])]),e._v(" "),r("div",{staticClass:"container mt--16 pb-5"},[r("div",{staticClass:"row justify-content-center"},[r("div",{staticClass:"col-lg-5 col-md-7"},[r("div",{staticClass:"card bg-secondary border-0 mb-0"},[e._m(1),e._v(" "),r("div",{staticClass:"card-body"},[r("div",{staticClass:"card-body"},[r("div",{staticClass:"text-center"},[r("strong",[e._v(e._s(e.sub_empresa_texto))])])]),e._v(" "),r("validation-observer",{ref:"formValidator",scopedSlots:e._u([{key:"default",fn:function(t){var n=t.handleSubmit;return[r("form",{attrs:{role:"form"},on:{submit:function(t){return t.preventDefault(),n(e.OnLogin)}}},[r("base-input",{staticClass:"mb-3",attrs:{alternative:"",name:"User",type:"text",rules:{required:!0,email:!1},"prepend-icon":"ni ni-single-02",placeholder:"Usuario"},model:{value:e.model.email,callback:function(t){e.$set(e.model,"email",t)},expression:"model.email"}}),e._v(" "),r("base-input",{staticClass:"mb-3",attrs:{alternative:"",name:"Password",rules:{required:!0,min:4},"prepend-icon":"ni ni-lock-circle-open",type:"password",placeholder:"Contraseña"},model:{value:e.model.password,callback:function(t){e.$set(e.model,"password",t)},expression:"model.password"}}),e._v(" "),r("base-checkbox",{model:{value:e.model.rememberMe,callback:function(t){e.$set(e.model,"rememberMe",t)},expression:"model.rememberMe"}},[e._v("Acuérdate de mí")]),e._v(" "),r("div",{staticClass:"text-center"},[r("base-button",{staticClass:"my-4",attrs:{type:"primary","native-type":"submit"}},[e._v("Ingresar al sistema")])],1)],1)]}}])})],1)])])])])])}),[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"container"},[t("div",{staticClass:"header-body text-center mb-7"})])},function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"card-header bg-transparent"},[t("div",{staticClass:"text-muted text-center"},[t("small",[t("img",{staticClass:"logo-login",attrs:{src:"/img/brand/vigitrackv2.png"}})])])])}],!1,null,null,null);t.default=component.exports}}]);